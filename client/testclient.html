<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Sketch</title>
    <link
      rel="icon"
      href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üê¢</text></svg"
    />

    <script>
      // Simple client-side script to make the turtle move in random circles using the server API

      function moveTurtleInCircle() {
        const radius = Math.floor(Math.random() * 100) + 50; // Random radius between 50 and 150
        const steps = 36; // Number of steps to complete the circle
        const centerX = Math.floor(Math.random() * window.innerWidth);
        const centerY = Math.floor(Math.random() * window.innerHeight);

        let step = 0;

        const interval = setInterval(() => {
          if (step >= steps) {
            clearInterval(interval);
            moveTurtleInCircle(); // Start a new circle after the current one is complete
            return;
          }

          const angle = (step / steps) * 2 * Math.PI;
          const x = centerX + radius * Math.cos(angle);
          const y = centerY + radius * Math.sin(angle);

          fetch("http://localhost:8008/api", {
            method: "POST",
            headers: {
              "Content-Type": "application/x-www-form-urlencoded",
            },
            body: new URLSearchParams({
              x: Math.floor(x),
              y: Math.floor(y),
              name: "TestyMcTestface",
            }),
          })
            .then((response) => response.json())
            .then((data) => console.log("Turtle moved:", data))
            .catch((error) => console.error("Error moving turtle:", error));

          step++;
        }, 1000); // Move every 100 milliseconds
      }

      // Start moving the turtle in random circles
      moveTurtleInCircle();
    </script>
  </head>

  <body></body>
</html>
